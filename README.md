# K0syi

K0syi is a macOS service that can quickly fix typos caused by typing with the wrong keyboard layout.

### The problem

It's common to have multiple keyboard layouts enabled on macOS, e.g. non-English developers may use the U.S. layout for coding and their native language for instant messaging. With this setup, it can happen that you start typing in the chat, only to realize a sentence later that you have typed gibberish because the other layout was active. Until now, your only option was to delete and retype the whole thing, but K0syi can make that automatic.

### Installation

K0syi should be installed in `~/Library/Services`, from where the system picks it up at next login and presents it in the _Services_ menu when some text is selected.

For easier access, it is recommended to assign a key shortcut to the Services menu item under _System Preferences > Keyboard > Shortcuts > Services > Text_ (look for "K0syi Transform").

### How it works

K0syi receives a string that it first explodes into unicode characters, then performs a reverse lookup for each of them to find a match among the possible characters generated by the keys of the current keyboard layout. If a key is found, the original character is replaced by the one which would be emitted if the same key was pressed in the alternate layout. If there was no matching key, the character is left intact.

### Caveats

- only works reliably with exactly 2 keyboard layouts installed
- only supports the Shift modifier
- loses capitalization when applied to characters typed with CapsLock on if the original character has no capitalized form (e.g. caps "0" [U.S.] --> "ö" [Hungarian] instead of "Ö")
- haven't been tested with special input modes of CJK languages

### About the name

"K0syi" is a gibberish word obtained when typing the Hungarian word "Köszi" (literally "thanks") with the U.S. layout.

### License

MIT
